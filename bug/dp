#include<bits/stdc++.h>
using namespace std;
set<long long int> ve[105][1005];
int main(){
    int t;
    cin >> t;
    while(t--){
        long long int n,m,k,s[105][1005]={},a[105]={},w[105]={};
        cin >> n>>m>>k;
        for(int i=0;i<105;i++)for(int q=0;q<1005;q++)ve[i][q].clear();
        for(int i=1;i<=n;i++){
            cin >> w[i]>>a[i];
        }
        for(int i=1;i<=n;i++){
            for(int q=0;q<=m;q++){
                if(q-w[i]<0){
                    s[i][q]=s[i-1][q];
                    ve[i][q].clear();
                    for(set<long long int>::iterator it2=ve[i-1][q].begin();it2!=ve[i-1][q].end();it2++)ve[i][q].insert(*it2);
                    continue;
                }
                if(k>ve[i-1][q-w[i]].size()){
                    if(s[i-1][q]>s[i-1][q-w[i]]+a[i]){
                        s[i][q]=s[i-1][q];
                        ve[i][q].clear();
                        for(set<long long int>::iterator it2=ve[i-1][q].begin();it2!=ve[i-1][q].end();it2++)ve[i][q].insert(*it2);
                    }else{
                        s[i][q]=s[i-1][q-w[i]]+a[i];
                        ve[i][q].clear();
                        for(set<long long int>::iterator it2=ve[i-1][q-w[i]].begin();it2!=ve[i-1][q-w[i]].end();it2++)ve[i][q].insert(*it2);
                        ve[i][q].insert(i);
                    }
                }else{
                    for(set<long long int>::iterator it=ve[i-1][q-w[i]].begin();it!=ve[i-1][q-w[i]].end();it++){
                        if(s[i][q]>=s[i-1][q]&&s[i][q]>=s[i-1][q-w[i]]+a[i]-a[*it])continue;
                        if(s[i-1][q]>s[i-1][q-w[i]]+a[i]-a[*it]){
                            s[i][q]=s[i-1][q];
                            ve[i][q].clear();
                            for(set<long long int>::iterator it2=ve[i-1][q].begin();it2!=ve[i-1][q].end();it2++)ve[i][q].insert(*it2);
                        }else{
                            s[i][q]=s[i-1][q-w[i]]+a[i]-a[*it];
                            ve[i][q].clear();
                            for(set<long long int>::iterator it2=ve[i-1][q-w[i]].begin();it2!=ve[i-1][q-w[i]].end();it2++)ve[i][q].insert(*it2);
                            ve[i][q].erase(ve[i][q].find(*it));
                            ve[i][q].insert(i);
                        }
                    }
                }
            }
        }
//        for(int i=1;i<=n;i++){
//            for(int q=0;q<=m;q++){
//                cout << ve[i][q].size()<<" ";
//            }
//            cout << endl;
//        }
//        for(int i=1;i<=n;i++){
//            for(int q=0;q<=m;q++){
//                cout << s[i][q]<<" ";
//            }
//            cout << endl;
//        }
        cout << s[n][m]<<endl;
    }
}
